把题目看做在平面上猜点，$1.$，$2.$ 操作实际上是把一个图形平行于坐标轴切开，$3.$ 操作是切掉右上角的一部分。于是会发现，无论如何操作我们都有方案保证图形在任意时刻都阶梯状的。

考虑把阶梯状的图形分成三块，左下角矩形面积为 $S_A$​，左上角的矩形面积为 $S_B$​，右下角矩形面积为 $S_C$​，则分类讨论：

1. $S_B \leq S_A + S_C$ ​且 $S_C \leq S_A + S_B$，此时在矩形 $A$ 的正中心做一次询问。
2. $S_B > S_A + S_C$，那么在 $S_B$ 与 $S_A$ 的交界处中点做一次询问。
3. $S_C > S_A + S_B$，那么在 $S_C$ ​于 $S_A$ 的交界处中点做一次询问。

容易证明，每次 $1.$ 操作至少让图形面积减少 $\frac{1}{4}$​，$2.$，$3.$ 操作要么把图形切成一个矩形（也就是下次操作无论如何都必然减少 $\frac{1}{4}$，要么直接切下图形的 $\frac{1}{4}$。因此最坏复杂度为：

$$
O(\log_{\frac 43}(10^{18\times 2})\times 2) < 577
$$